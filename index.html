<!DOCTYPE html><html><head><title>How to implement Two-Factor Authentication- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header left-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div></div></div><div id="viewsaurus" data-title="How to implement Two-Factor Authentication"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>How to implement Two-Factor Authentication</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn how to implement 2-Factor Authentication using RingCentral SMS Messaging API. Click the &quot;Start Tutorial&quot; button below to start.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="2FA Tutorial" class="chapter"><div data-title="Welcome!" data-file="tutorial/config.json" class="step"><h3 id="two-factor-authentication">Two-Factor Authentication</h3>
<p>This tutorial shows how to use RingCentral SMS API to send a verification code for 2-factor authentication to help prevent brute force attacks and protect user&#39;s accounts.</p>
<p><strong> Use case 1: Protect a user account from brute force attacks. </strong></p>
<p>After 3 unsuccessful attempts were made to log into a user&#39;s account, the account will be temporarily locked. The service will generate a 6-digit verification code and send the code to the user&#39;s mobile phone number.</p>
<p>The user has to use the verification code to unlock his/her account. The verification code can be used only one time and it also expires after 1 hour.</p>
<p>If the verification code is incorrect, or if the verification code expired, the user has to request for a new verification code.</p>
<p><strong> Use case 2: Prevent taking over login control. </strong></p>
<p>When a user wants to reset the login password. The service will generate a 6-digit verification code and send the code to the user&#39;s mobile phone number.</p>
<p>The user has to use the verification code to set a new password for his/her account. The verification code can be used only one time and it also expires after 1 hour.</p>
<p>If the verification code is incorrect, or if the verification code expired, the user has to request for a new verification code.</p>
<h3 id="requirements">Requirements</h3>
<p>You must have a RingCentral developer account. If you don&#39;t have one, click <a href="https://developer.ringcentral.com">here</a> to create a free developer account.</p>
<p>You also have to <a href="https://developer.ringcentral.com/library/getting-started.html">create a RingCentral app</a> with the &quot;SMS&quot; permissions. And retrieve the AppKey and AppSecret for using with this tutorial.</p>
<h3 id="prerequisite-knowledge">Prerequisite knowledge</h3>
<p>We use Express framework to build the demo web app. If you are not familiar with Express, click <a href="https://expressjs.com/en/starter/installing.html">here</a> to learn more.</p>
<p>We use JQuery to send HTTP GET and POST requests to our web server. If you are not familiar with JQuery, click <a href="https://jquery.com/">here</a> to learn more.</p>
<p>We use SQLite to create a users database. If you are not familiar with SQLite, click <a href="https://www.tutorialspoint.com/sqlite//">here</a> to learn more.</p>
</div><div data-title="Project setup" data-file="README.md" data-highlight="26-30" class="step"><h3 id="clone-the-project-from-github">Clone the project from GitHub</h3>
<p>Run the commands below to clone the project from GitHub</p>
<p><code>git clone https://github.com/ringcentral-tutorials/2f-auth-node</code></p>
<p><code>cd 2f-auth-node</code></p>
<p><code>npm intall --save</code></p>
</div><div data-title="Set environment" data-file="dotenv" class="step"><h3 id="set-environment-parameters">Set environment parameters</h3>
<p>Rename the dotenv to .env and provide your app credentials, RingCentral sandbox account&#39;s username and password.</p>
<ul>
<li><strong>Note</strong>: The username is the account number and it is also the phone number we will use to send SMS from. If you want to use another number under this account, you can create a new variable and specify the phone number and use that number for sending SMS instead.</li>
</ul>
<p>You can now run the tutorial demo app.</p>
<p>Start the server</p>
<p><code>node index.js</code></p>
<p>On the Web browser, enter this address <strong>localhost:3000</strong> (or the port number you specified in your .env environment)</p>
<h3 id="run-the-demo-web-app">Run the demo Web app</h3>
<p>To see how it works, signup to create a new user account. Then login with a wrong password for 3 times. Or click the Reset password link.</p>
<p>If you login successfully, it will just launch the about page.</p>
</div><div data-title="Setup a Web server" data-file="index.js" data-highlight="1-19" class="step"><h3 id="setup-a-web-server">Setup a Web server</h3>
<p>Let&#39;s start to setup our Web server.</p>
<p>In this section, we import the <em>express</em> framework and create the <strong>app</strong> object from the <em>express</em> package.</p>
<p>We set the <strong>views</strong> folder, where we place all the web pages <em>.ejs</em> files.</p>
<p>Finally, we create an HTTP server and listen to the specified port for incoming HTTP requests.</p>
</div><div data-title="Handle HTTP GET and POST requests" data-file="index.js" data-highlight="21-49" class="step"><h3 id="handle-http-get-and-post-requests">Handle HTTP GET and POST requests</h3>
<p>In this section, we capture incoming HTTP GET and POST requests from the client side then forward the request to an appropriated function in the <strong>engine</strong> module to process the request.</p>
<p>We will discuss about these functions later when we make a call from the client side.</p>
</div><div data-title="Web pages and client JavaScript" data-file="views/about.ejs" data-highlight="1-78" class="step"><h3 id="web-pages">Web pages</h3>
<p>The Web page files are located under the <strong>views</strong> folder.</p>
<p>In this tutorial, we&#39;ll implement 3 pages:</p>
<p><strong>signup.ejs</strong>: this page contains a form for users to sign up.</p>
<p><strong>index.ejs</strong>: this page contains forms for users to login and reset password.</p>
<p><strong>about.ejs</strong>: this page contains information about this tutorial.</p>
<h3 id="client-side-javascript-code">Client-side JavaScript code</h3>
<p>Client-side JavaScript files are located under the <strong>public/js</strong> folder.</p>
<p>We&#39;ll implement all functions in the <em>main.js</em> file.</p>
</div><div data-title="Add a signup page" data-file="views/signup.ejs" data-highlight="29-46" class="step"><h3 id="add-a-signup-page">Add a signup page</h3>
<p>We need a signup page for users to create a user account.</p>
<p>In this page, we implement a form where a user provides email address, password, mobile phone number, first name and last name to create a new user account.</p>
<p>When the <em>Submit</em> button in the form is clicked, we will use JQuery post function to send a request to the server instead of using the default submit function.</p>
</div><div data-title="Add a login page" data-file="views/index.ejs" data-highlight="29-75" class="step"><h3 id="add-a-login-page">Add a login page</h3>
<p>We also need a login page for users to login.</p>
<p>We create 3 UI blocks to show the login form, reset password form and code verification form in the same page. Then we will use JQuery code to display the forms based on the stage of the login progress.</p>
<p>When a button in a form is clicked, we will use JQuery post function to send a request to the server instead of using the default submit function.</p>
</div><div data-title="Implement client-side JavaScript" data-file="public/js/main.js" data-highlight="1-179" class="step"><h3 id="implement-client-side-javascript">Implement client-side JavaScript</h3>
<p>Now, let&#39;s create the <em>main.js</em> file and save it to the <strong>public/js/</strong> folder.</p>
<p>In this file, we will implement all client-side functions to send HTTP requests to our server.</p>
</div><div data-title="Implement signup client-side" data-file="public/js/main.js" data-highlight="60-95" class="step"><h3 id="implement-signup-client-side">Implement signup client-side</h3>
<p>We implement the <strong>signup()</strong> function which will be called when a user clicks the Submit button on the signup page.</p>
<p>Inside the client-side <strong>signup</strong> function, we will check the mandatory user&#39;s inputs and encrypt the password before posting the <em>signup</em> request to the our server.</p>
<p>If the server response with no error, we then launch the main page, which will show the login form. If it is an error, we will pop up an alert dialog with the error message.</p>
</div><div data-title="Implement signup server-side" data-file="engine.js" data-highlight="258-278" class="step"><h3 id="implement-signup-server-side">Implement signup server-side</h3>
<p>In the <strong>engine.js</strong> file, we implement the <strong>signup</strong> function which will be called when a <em>signup</em> request is made from the client-side.</p>
<p>Inside the server-side <strong>signup</strong> function, we will create a new user and insert the user information to the <em>users.db</em> database.</p>
<p>For each user account, we create an entry in the database with the following user data:</p>
<ul>
<li><strong>id</strong>: a unique user ID</li>
<li><strong>phoneno</strong>: user&#39;s mobile phone number</li>
<li><strong>email</strong>: user&#39;s email address</li>
<li><strong>pwd</strong>: encrypted password</li>
<li><strong>fname</strong>: user&#39;s first name</li>
<li><strong>lname</strong>: user&#39;s last name</li>
<li><strong>failure</strong>: number of failed login attempts</li>
<li><strong>locked</strong>: account locked/unlocked status</li>
<li><strong>code</strong>: latest sent verification code</li>
<li><strong>codeexpiry</strong>: verification code expiry time</li>
</ul>
</div><div data-title="Implement login client-side" data-file="public/js/main.js" data-highlight="12-58" class="step"><h3 id="implement-login-client-side">Implement login client-side</h3>
<p>First, we implement the <strong>getSeed</strong> function which will be called when a user clicks the Submit button on the login form.</p>
<p>Inside the client-side <strong>getSeed</strong> function, we will send a <em>getseed</em> request to our server to get a seed value, which will be used to encrypt the user&#39;s password.</p>
<p>Then we implement the <strong>login</strong> function which will be called programmatically when we get the seed from our server.</p>
<p>Inside the client-side <strong>login</strong> function, we will post a <em>login</em> request with the user&#39;s email address, the encrypted password and the id of the seed to the server.</p>
</div><div data-title="Implement login server-side - step 1" data-file="engine.js" data-highlight="13-34" class="step"><h3 id="implement-login-server-side-step-1">Implement login server-side - step 1</h3>
<p>In the <strong>engine.js</strong> file, we implement the <strong>getSeed</strong> function which will be called when a <em>getseed</em> request is made from the client-side.</p>
<p>Inside the server-side <strong>getSeed</strong> function, we will generate a seed value and add it to the seeds table in our users database. We then send a response back to the client with the seed id and seed value.</p>
</div><div data-title="Implement login server-side - step 2" data-file="engine.js" data-highlight="35-61" class="step"><h3 id="implement-login-server-side-step-2">Implement login server-side - step 2</h3>
<p>Then we implement the server-side <strong>login</strong> function which will be called when a <em>login</em> request is made from the client-side.</p>
<p>Inside the server-side <strong>login</strong> function, we will read the seed value from the seeds table identified by the seed id we just got back from the client.</p>
<p>Then we read the user&#39;s data (phoneno, pwd, failure, locked, code) from the users database identified by the user&#39;s email address.</p>
</div><div data-title="Implement login server-side - step 3" data-file="engine.js" data-highlight="62-103" class="step"><h3 id="implement-login-server-side-step-3">Implement login server-side - step 3</h3>
<p>If the user&#39;s data is read successfully, we will check if the account is locked or not.</p>
<p>If the account is locked, we will generate a verification code and send it to the user&#39;s mobile phone number. We will look into the <em>sendSMSMessage</em> function later. To response to the user&#39;s request in this case, we create a message to notify that the account is temporarily locked and a verification code is sent to the user&#39;s mobile phone number. However, we should reveal just the last 4-digit phone number e.g. X-XXX-XXX-1234</p>
<p>If the account is not locked, we will encrypt the account password with the seed value then compare it with the user&#39;s login password taken from the post request <em>inPassword</em>.</p>
<p>Now, if the passwords match, we will proceed the login with an &quot;ok&quot; response.</p>
<p>If the passwords do not match, we will increase the failure count and check if the failure count reaches the MAX_FAILURE (in this demo, this max is set to 3 times) before updating the user database with the new values. Then we send the failure response to the client.</p>
</div><div data-title="Implement the sendSMSMessage function" data-file="engine.js" data-highlight="286-286" class="step"><h3 id="implement-sendsmsmessage-function">Implement sendSMSMessage function</h3>
<p>When we call the <em>sendSMSMessage</em> function, we pass the following parameters to the function:</p>
<ul>
<li><ul>
<li><strong>res</strong>: the response object for sending response to the client,</li>
</ul>
</li>
<li><ul>
<li><strong>db</strong>: the SQLite database handle,</li>
</ul>
</li>
<li><ul>
<li><strong>toNumber</strong>: the user&#39;s mobile phone number, to which we can send a text message,</li>
</ul>
</li>
<li><ul>
<li><strong>message</strong>: the message we want to respond to the user who tries to login or to reset password.</li>
</ul>
</li>
</ul>
</div><div data-title="Instantiate the RingCentral Node JS SDK" data-file="engine.js" data-highlight="287-294" class="step"><h3 id="instantiate-the-ringcentral-node-js-sdk">Instantiate the RingCentral Node JS SDK</h3>
<p>First, we create the SDK instance <code>rcsdk</code> and initialize it with the AppKey and AppSecret.</p>
<p>Then we call the <code>rcsdk.platform()</code> function to get the instance of the platform component. The <code>platform</code> instance will be used later to login and call RingCentral APIs.</p>
</div><div data-title="Login to RingCentral account" data-file="engine.js" data-highlight="296-299" class="step"><h3 id="login-to-ringcentral-account">Login to RingCentral account</h3>
<p>To login RingCentral account, we call the <code>platform.login()</code> function with the account&#39;s username and password predefined in the <em>.env</em> file.</p>
</div><div data-title="Send a verification code" data-file="engine.js" data-highlight="301-307" class="step"><h3 id="generate-a-verification-code">Generate a verification code</h3>
<p>After we logged in RingCentral account successfully, we use the <strong>randomatic</strong> library to generate a verification code.</p>
<pre><code>function generateRandomCode(digits) {
  const randomize = require(&#39;randomatic&#39;);
  var code = randomize(&#39;0&#39;, digits);
  return code`
}
</code></pre><h3 id="send-a-verification-code-via-sms-message">Send a verification code via SMS message</h3>
<p>We use the <code>platform.post()</code> function to call the SMS API with the specified parameters:</p>
<p>The <code>from</code> number is our RingCentral phone number specified in the environment file.</p>
<p>The <code>to</code> number is the user&#39;s mobile phone number we read from the user&#39;s database.</p>
<p>The <code>text</code> contains the verification code we generated above.</p>
</div><div data-title="Save the verification code" data-file="engine.js" data-highlight="308-321" class="step"><h3 id="save-the-verification-code">Save the verification code</h3>
<p>After we sent the verification code successfully, we generate a timestamp and save the verification code and the timestamp to the user database.</p>
<p>Finally, we send a response back to the client to notify the user that the user account is locked and a verification code was sent to the user&#39;s mobile phone number.</p>
</div><div data-title="Unlock a user account - client-side" data-file="public/js/main.js" data-highlight="97-118" class="step"><h3 id="unlock-a-user-account-client-side">Unlock a user account - client-side</h3>
<p>When a user&#39;s account is locked, we ask a user to provide a verification code to unlock the account before the user can retry to login.</p>
<p>We implement the <strong>verifyPasscode</strong> function which will be called when a user clicks the Submit button from the verification form.</p>
<p>Inside the client-side <strong>verifyPasscode</strong> function, we will post a <em>verifypasscode</em> request with the user&#39;s email address and the verification code to the server.</p>
<p>If we receive an &quot;OK&quot; response from the server, which means the verification code matched with the code we saved in the user database, then we will allow the user to try login again.</p>
</div><div data-title="Unlock a user account - server-side" data-file="engine.js" data-highlight="169-228" class="step"><h3 id="unlock-a-user-account-server-side">Unlock a user account - server-side</h3>
<p>In the <strong>engine.js</strong> file, we implement the <strong>verifyPasscode</strong> function which will be called when a <em>verifypasscode</em> request is posted from the client side.</p>
<p>Inside the server-side <strong>verifyPasscode</strong> function, we will read the user&#39;s data (locked, code, codeexpiry) identified by the user&#39;s email address.</p>
<p>If the user&#39;s data is read successfully, we will check if the account is locked or not.</p>
<p>If the account is not locked, we just send a response asking the user to login normally.</p>
<h3 id="validate-the-verification-code">Validate the verification code</h3>
<p>If the account is locked, we will generate a new timestamp and compare it with the <em>codeexpiry</em> to check if the verification is still valid.</p>
<p>If the verification code is still valid, we validate the user&#39;s provided code and compare it with the one we read from the database.</p>
<p>If the codes match, we unlock the user&#39;s account by updating the user&#39;s data (failure=0, locked=0, code=0) and send a response to allow the user to retry login.</p>
<p>If the codes do not match, we reset the verification code (code=0, codeexpiry=0) and send a response to the user indicating the verification code is invalid. In this demo, the user has to send a new request for a new verification code manually.</p>
</div><div data-title="Reset password - client-side" data-file="public/js/main.js" data-highlight="146-179" class="step"><h3 id="reset-password-client-side">Reset password - client-side</h3>
<p>Requiring a verification code when a user attempts to change the login password would prevent the account from being taken over by hackers if the account login credentials were compromised.</p>
<p>We implement the <strong>resetPwd</strong> function which will be called when a user clicks the Submit button from the Reset password form.</p>
<p>Inside the client <strong>resetPwd</strong> function, we will post a <em>resetpwd</em> request with the user&#39;s email address to the server.</p>
<p>We provide two steps to reset a password. The first step is to ask for the user&#39;s email address and send it to the server to get a verification code. The second step is when we receive the &quot;OK&quot; response from the server, we will enable the entire form with the new password field and the verification code field.</p>
</div><div data-title="Reset password - server-side" data-file="engine.js" data-highlight="108-124" class="step"><h3 id="reset-password-server-side">Reset password - server-side</h3>
<p>In the <strong>engine.js</strong> file, we implement the <strong>resetPwd</strong> function which will be called when a <em>resetpwd</em> request is posted from the client side.</p>
<p>Inside the server <strong>resetPwd</strong> function, we will read the user&#39;s data (phoneno, code, codeexpiry) identified by the user&#39;s email address.</p>
<p>If the user&#39;s data is read successfully, we will check if the request is to get a verification code by checking if the <em>code</em> and <em>pwd</em> exist in the request.</p>
</div><div data-title="Send a verification code" data-file="engine.js" data-highlight="124-131" class="step"><h3 id="send-a-verification-code">Send a verification code</h3>
<p>If the <em>code</em> and <em>pwd</em> do not exist, it is a request for a verification code. Then we call the <strong>SendSMSMessage</strong> function to generate a verification code, send it to the user&#39;s mobile phone number and send a response to the client.</p>
</div><div data-title="Implement reset password" data-file="engine.js" data-highlight="131-166" class="step"><h3 id="implement-reset-password">Implement reset password</h3>
<p>If the <em>code</em> and the <em>pwd</em> exist, it is a request to set a new password. Then we we will generate a new timestamp and compare it with the <em>codeexpiry</em> to check if the verification is still valid.</p>
<p>If the verification code is still valid, we validate the user&#39;s provided code and compare it with the one we read from the database.</p>
<p>If the codes match, we update the user&#39;s data with the new password, reset the code and the expiry time. And send a response to allow the user to login with a new password.</p>
<p>If the codes do not match, we reset the verification code (code=0, codeexpiry=0) and send a response to the user to indicate that the verification code is invalid. In this demo, the user has to send a new request for a new verification code manually.</p>
</div><div data-title="Resend a verification code" data-file="engine.js" data-highlight="229-242" class="step"><h3 id="resend-a-verification-code">Resend a verification code</h3>
<p>Every time a user requests for a verification code, we read the user&#39;s mobile phone number from the user database then call the <em>sendSMSMessage</em> function to generate a new verification code, send it to the user and update the user database with the code and code expiration time.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="tutorial/config.json" data-mode="json">ewogICAgInRpdGxlIjogIkhvdyB0byBpbXBsZW1lbnQgVHdvLUZhY3RvciBBdXRoZW50aWNhdGlvbiIsCiAgICAicmVwbyI6ICJyaW5nY2VudHJhbC10dXRvcmlhbHMvMmYtYXV0aC1ub2RlIiwKICAgICJkZXNjcmlwdGlvbiI6ICJMZWFybiBob3cgdG8gaW1wbGVtZW50IDItRmFjdG9yIEF1dGhlbnRpY2F0aW9uIHVzaW5nIFJpbmdDZW50cmFsIFNNUyBNZXNzYWdpbmcgQVBJLiBDbGljayB0aGUgXCJTdGFydCBUdXRvcmlhbFwiIGJ1dHRvbiBiZWxvdyB0byBzdGFydC4iLAogICAgImhlcm9rdSI6IGZhbHNlCn0K</textarea>
<textarea class="saurus-file" data-file="README.md" data-mode="markdown">IyMjIE92ZXJ2aWV3ClRoaXMgZGVtbyBXZWIgYXBwIHNob3dzIGhvdyB0byB1c2UgUmluZ0NlbnRyYWwgU01TIEFQSSB0byBpbXBsZW1lbnQgYSAyLUZhY3RvciBBdXRoZW50aWNhdGlvbiAoMkZBKSBzZXJ2aWNlLgoKMkZBIGhlbHBzIHByZXZlbnQgYnJ1dGUgZm9yY2UgYXR0YWNrcyBhbmQgcHJvdGVjdCB1c2VyJ3MgYWNjb3VudHMuCgojIyMgVXNlIGNhc2UgMTogUHJvdGVjdCBhIHVzZXIgYWNjb3VudCBmcm9tIGJydXRlIGZvcmNlIGF0dGFja3MuCkFmdGVyIDMgdW5zdWNjZXNzZnVsIGF0dGVtcHRzIHdlcmUgbWFkZSB0byBsb2cgaW50byBhIHVzZXIncyBhY2NvdW50LCB0aGUgYWNjb3VudCB3aWxsIGJlIHRlbXBvcmFyaWx5IGxvY2tlZC4gVGhlIHNlcnZpY2Ugd2lsbCBnZW5lcmF0ZSBhIDYtZGlnaXQgdmVyaWZpY2F0aW9uIGNvZGUgYW5kIHNlbmQgdGhlIGNvZGUgdG8gdGhlIHVzZXIncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBUaGUgdXNlciBoYXMgdG8gdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB1bmxvY2sgaGlzL2hlciBhY2NvdW50LiBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgY2FuIGJlIHVzZWQgb25seSBvbmUgdGltZSBhbmQgaXQgYWxzbyBleHBpcmVzIGFmdGVyIDEgaG91ci4gSWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIGluY29ycmVjdCwgb3IgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGV4cGlyZWQsIHRoZSB1c2VyIGhhcyB0byByZXF1ZXN0IGZvciBhIG5ldyB2ZXJpZmljYXRpb24gY29kZS4KCiMjIyBVc2UgY2FzZSAyOiBQcmV2ZW50IHRha2luZyBvdmVyIGxvZ2luIGNvbnRyb2wuCldoZW4gYSB1c2VyIHdhbnRzIHRvIHJlc2V0IHRoZSBsb2dpbiBwYXNzd29yZC4gVGhlIHNlcnZpY2Ugd2lsbCBnZW5lcmF0ZSBhIDYtZGlnaXQgdmVyaWZpY2F0aW9uIGNvZGUgYW5kIHNlbmQgdGhlIGNvZGUgdG8gdGhlIHVzZXIncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBUaGUgdXNlciBoYXMgdG8gdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byBzZXQgYSBuZXcgcGFzc3dvcmQgZm9yIGhpcy9oZXIgYWNjb3VudC4gVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGNhbiBiZSB1c2VkIG9ubHkgb25lIHRpbWUgYW5kIGl0IGFsc28gZXhwaXJlcyBhZnRlciAxIGhvdXIuIElmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QsIG9yIGlmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBleHBpcmVkLCB0aGUgdXNlciBoYXMgdG8gcmVxdWVzdCBmb3IgYSBuZXcgdmVyaWZpY2F0aW9uIGNvZGUuCgojIyMgUmluZ0NlbnRyYWwgQ29ubmVjdCBQbGF0Zm9ybQpSaW5nQ2VudHJhbCBDb25uZWN0IFBsYXRmb3JtIGlzIGEgcmljaCBSRVNUZnVsIEFQSSBwbGF0Zm9ybSB3aXRoIG1vcmUgdGhhbiA2MCBBUElzIGZvciBidXNpbmVzcyBjb21tdW5pY2F0aW9uIGluY2x1ZGVzIGFkdmFuY2VkIHZvaWNlIGNhbGxzLCBjaGF0IG1lc3NhZ2luZywgU01TL01NUyBhbmQgRmF4LgoKIyMjIFJpbmdDZW50cmFsIERldmVsb3BlciBQb3J0YWwKVG8gc2V0dXAgYSBmcmVlIGRldmVsb3BlciBhY2NvdW50LCBjbGljayBbaHR0cHM6Ly9kZXZlbG9wZXIvcmluZ2NlbnRyYWwuY29tXShoZXJlKQoKIyMjIEhvdyB0byBydW4gdGhlIGRlbW8KKiBDbGljayB0aGUgU2lnbnVwIHRhYiBhbmQgY29tcGxldGUgdGhlIHNpZ251cCBmb3JtIHRvIGNyZWF0ZSBhbiBhY2NvdW50LiBVc2UgYSByZWFsIHBob25lIG51bWJlciEKKiBDbGljayB0aGUgTG9naW4gdGFiIGFuZCB0cnkgdG8gbG9naW4gMyB0aW1lcyB3aXRoIGFuIGluY29ycmVjdCBwYXNzd29yZC4KKiBDaGVjayB5b3VyIFNNUyBtZXNzYWdlIHRvIGdldCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUuCiogRW50ZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHVubG9jayB0aGUgYWNjb3VudC4gVGhlbiBsb2dpbiB3aXRoIGEgY29ycmVjdCBwYXNzd29yZC4KKiBDbGljayB0aGUgTG9naW4gdGFiIGFuZCBjbGljayB0aGUgUmVzZXQgcGFzc3dvcmQgbGluay4KKiBFbnRlciB0aGUgYWNjb3VudCBlbWFpbCBhZGRyZXNzIGFuZCBjbGljayB0aGUgU3VibWl0IGJ1dHRvbi4KKiBDaGVjayB5b3VyIFNNUyBtZXNzYWdlIHRvIGdldCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUuCiogRW50ZXIgYSBuZXcgcGFzc3dvcmQgYW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0aGVuIGNsaWNrIHRoZSBTdWJtaXQgYnV0dG9uIHRvIGNoYW5nZSB0aGUgcGFzc3dvcmQuCiogTG9naW4gd2l0aCBhIG5ldyBwYXNzd29yZC4KCiMjIyBDbG9uZSB0aGUgcHJvamVjdApgYGAKZ2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvMmYtYXV0aC1ub2RlCgpjZCAyZi1hdXRoLW5vZGUKCm5wbSBpbnRhbGwgLS1zYXZlCmBgYAo=</textarea>
<textarea class="saurus-file" data-file="dotenv" data-mode="text">UE9SVD0zMDAwClJDX0VOVj1zYW5kYm94CkxPQ0FMX0VOVj1sb2NhbGhvc3QKUkNfQVBQX05BTUU9MkZhY3RvckF1dGgKUkNfU0VSVkVSPWh0dHBzOi8vcGxhdGZvcm0uZGV2dGVzdC5yaW5nY2VudHJhbC5jb20KUkNfQVBQX0tFWT1Zb3VyLUFwcC1LZXkKUkNfQVBQX1NFQ1JFVD1Zb3VyLUFwcC1TZWNyZXQKUkNfVVNFUk5BTUU9WW91ci1BY2NvdW50LVVzZXJuYW1lClJDX1BBU1NXT1JEPVlvdXItQWNjb3VudC1QYXNzd29yZAo=</textarea>
<textarea class="saurus-file" data-file="index.js" data-mode="javascript">dmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJykKCmlmKCdwcm9kdWN0aW9uJyAhPT0gcHJvY2Vzcy5lbnYuTE9DQUxfRU5WICkKICByZXF1aXJlKCdkb3RlbnYnKS5sb2FkKCk7Cgp2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKdmFyIGFwcCA9IGV4cHJlc3MoKTsKdmFyIGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpOwp2YXIgdXJsZW5jb2RlZCA9IGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7ZXh0ZW5kZWQ6IGZhbHNlfSkKCmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ3B1YmxpYycpKSkKYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAndmlld3MnKSkKYXBwLnNldCgndmlldyBlbmdpbmUnLCAnZWpzJykKYXBwLnVzZSh1cmxlbmNvZGVkKTsKCnZhciBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwCgp2YXIgc2VydmVyID0gcmVxdWlyZSgnaHR0cCcpLmNyZWF0ZVNlcnZlcihhcHApOwpzZXJ2ZXIubGlzdGVuKHBvcnQpOwoKdmFyIHJjX2VuZ2luZSA9IHJlcXVpcmUoJy4vZW5naW5lJyk7CmFwcC5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByY19lbmdpbmUuY2FuTG9naW4ocmVzKQp9KQphcHAuZ2V0KCcvYWJvdXQnLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByZXMucmVuZGVyKCdhYm91dCcpCn0pCmFwcC5nZXQoJy9nZXRzZWVkJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgcmNfZW5naW5lLmdldFNlZWQocmVxLCByZXMpCn0pCmFwcC5wb3N0KCcvbG9naW4nLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICByY19lbmdpbmUubG9naW4ocmVxLCByZXMpCn0pCmFwcC5wb3N0KCcvcmVzZXRwd2QnLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICAgcmNfZW5naW5lLnJlc2V0UHdkKHJlcSwgcmVzKQp9KQphcHAucG9zdCgnL3ZlcmlmeXBhc3Njb2RlJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgIHJjX2VuZ2luZS52ZXJpZnlQYXNzY29kZShyZXEsIHJlcykKfSkKYXBwLnBvc3QoJy9yZXNlbmRjb2RlJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgIHJjX2VuZ2luZS5yZXNlbmRDb2RlKHJlcSwgcmVzKQp9KQphcHAuZ2V0KCcvc2lnbnVwJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgIHJjX2VuZ2luZS5jcmVhdGVUYWJsZSgpCiAgIHJlcy5yZW5kZXIoInNpZ251cCIpCn0pCmFwcC5wb3N0KCcvc2lnbnVwJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgIHJjX2VuZ2luZS5zaWdudXAocmVxLCByZXMpCn0pCg==</textarea>
<textarea class="saurus-file" data-file="views/about.ejs" data-mode="ejs">PCFkb2N0eXBlIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDx0aXRsZT4yLUZhY3RvciBBdXRoZW50aWNhdGlvbiBEZW1vPC90aXRsZT4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iY3NzL2Jvb3RzdHJhcC5taW4uY3NzIj4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9tYWluLmNzcyI+CjwvaGVhZD4KPGJvZHk+CiAgPG5hdiBjbGFzcz0ibmF2YmFyIG5hdmJhci1kZWZhdWx0Ij4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lci1mbHVpZCI+CiAgICAgIDxkaXYgY2xhc3M9Im5hdmJhci1oZWFkZXIiPgogICAgICAgIDxhIGhyZWY9Ii8iIGNsYXNzPSJuYXZiYXItYnJhbmQiPjxiPjItRmFjdG9yPC9iPiBBVVRIRU5USUNBVElPTjwvYT4KICAgICAgPC9kaXY+CiAgICAgIDx1bCBjbGFzcz0ibmF2IG5hdmJhci1uYXYiPgogICAgICAgIDxsaT48YSBocmVmPSIvIj5Mb2dpbjwvYT48L2xpPgogICAgICAgIDxsaT48YSBocmVmPSIvc2lnbnVwIj5TaWdudXA8L2E+PC9saT4KICAgICAgPC91bD4KICAgICAgPHVsIGNsYXNzPSJuYXYgbmF2YmFyLW5hdiBuYXZiYXItcmlnaHQiPgogICAgICAgIDxsaT48YSBocmVmPSJodHRwczovL3d3dy5yaW5nY2VudHJhbC5jb20iIHRhcmdldD0iX2JsYW5rIj5Qb3dlcmVkIGJ5Jm5ic3A7PGltZyBhbHQ9IkJyYW5kIiBzcmM9ImltZy9yaW5nY2VudHJhbC5wbmciIGhlaWdodD0iMjAiPjwvYT48L2xpPgogICAgICA8L3VsPgogICAgPC9kaXY+CiAgPC9uYXY+CgogIDxzZWN0aW9uIGlkPSdjb250ZW50Jz4KICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgIDxkaXYgY2xhc3M9ImNvbC14cy0xMiI+CiAgICAgICAgPGgyPk92ZXJ2aWV3PC9oMj4KICAgICAgICA8cD4KICAgICAgICAgIFRoaXMgZGVtbyBXZWIgYXBwIHNob3dzIGhvdyB0byB1c2UgUmluZ0NlbnRyYWwgU01TIEFQSSB0byBpbXBsZW1lbnQgYSAyLUZhY3RvciBBdXRoZW50aWNhdGlvbiAoMkZBKSBzZXJ2aWNlLgogICAgICAgICAgMkZBIGhlbHBzIHByZXZlbnQgYnJ1dGUgZm9yY2UgYXR0YWNrcyBhbmQgcHJvdGVjdCB1c2VyJ3MgYWNjb3VudHMuCiAgICAgICAgPC9wPgogICAgICAgIDxwPgogICAgICAgICAgPGgzPlVzZSBjYXNlIDE6IFByb3RlY3QgYSB1c2VyIGFjY291bnQgZnJvbSBicnV0ZSBmb3JjZSBhdHRhY2tzLjwvaDM+IEFmdGVyIDMgdW5zdWNjZXNzZnVsIGF0dGVtcHRzIHdlcmUgbWFkZSB0byBsb2cgaW50byBhIHVzZXIncyBhY2NvdW50LCB0aGUgYWNjb3VudCB3aWxsIGJlIHRlbXBvcmFyaWx5IGxvY2tlZC4gVGhlIHNlcnZpY2Ugd2lsbCBnZW5lcmF0ZSBhIDYtZGlnaXQgdmVyaWZpY2F0aW9uIGNvZGUgYW5kIHNlbmQgdGhlIGNvZGUgdG8gdGhlIHVzZXIncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBUaGUgdXNlciBoYXMgdG8gdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB1bmxvY2sgaGlzL2hlciBhY2NvdW50LiBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgY2FuIGJlIHVzZWQgb25seSBvbmUgdGltZSBhbmQgaXQgYWxzbyBleHBpcmVzIGFmdGVyIDEgaG91ci4gSWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGlzIGluY29ycmVjdCwgb3IgaWYgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIGV4cGlyZWQsIHRoZSB1c2VyIGhhcyB0byByZXF1ZXN0IGZvciBhIG5ldyB2ZXJpZmljYXRpb24gY29kZS4KICAgICAgICA8L3A+CiAgICAgICAgPHA+CiAgICAgICAgICA8aDM+VXNlIGNhc2UgMjogUHJldmVudCB0YWtpbmcgb3ZlciBsb2dpbiBjb250cm9sLjwvaDM+IFdoZW4gYSB1c2VyIHdhbnRzIHRvIHJlc2V0IHRoZSBsb2dpbiBwYXNzd29yZC4gVGhlIHNlcnZpY2Ugd2lsbCBnZW5lcmF0ZSBhIDYtZGlnaXQgdmVyaWZpY2F0aW9uIGNvZGUgYW5kIHNlbmQgdGhlIGNvZGUgdG8gdGhlIHVzZXIncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBUaGUgdXNlciBoYXMgdG8gdXNlIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byBzZXQgYSBuZXcgcGFzc3dvcmQgZm9yIGhpcy9oZXIgYWNjb3VudC4gVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGNhbiBiZSB1c2VkIG9ubHkgb25lIHRpbWUgYW5kIGl0IGFsc28gZXhwaXJlcyBhZnRlciAxIGhvdXIuIElmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBpcyBpbmNvcnJlY3QsIG9yIGlmIHRoZSB2ZXJpZmljYXRpb24gY29kZSBleHBpcmVkLCB0aGUgdXNlciBoYXMgdG8gcmVxdWVzdCBmb3IgYSBuZXcgdmVyaWZpY2F0aW9uIGNvZGUuCiAgICAgICAgPC9wPgoKICAgICAgICA8aDI+UmluZ0NlbnRyYWwgQ29ubmVjdCBQbGF0Zm9ybTwvaDI+CiAgICAgICAgPHA+CiAgICAgICAgICBSaW5nQ2VudHJhbCBDb25uZWN0IFBsYXRmb3JtIGlzIGEgcmljaCBSRVNUZnVsIEFQSSBwbGF0Zm9ybSB3aXRoIG1vcmUgdGhhbiA2MCBBUElzIGZvciBidXNpbmVzcyBjb21tdW5pY2F0aW9uIGluY2x1ZGVzIGFkdmFuY2VkIHZvaWNlIGNhbGxzLCBjaGF0IG1lc3NhZ2luZywgU01TL01NUyBhbmQgRmF4LgogICAgICAgIDwvcD4KICAgICAgICA8aDI+UmluZ0NlbnRyYWwgRGV2ZWxvcGVyIFBvcnRhbDwvaDI+CiAgICAgICAgPHA+CiAgICAgICAgICBUbyBzZXR1cCBhIGZyZWUgZGV2ZWxvcGVyIGFjY291bnQsIGNsaWNrIDxhIGhyZWY9Imh0dHBzOi8vZGV2ZWxvcGVyL3JpbmdjZW50cmFsLmNvbSIgdGFyZ2V0PSJfdG9wIj5oZXJlPC9hPi4KICAgICAgICA8L3A+CgogICAgICAgIDxoMj5Ib3cgdG8gcnVuIHRoZSBkZW1vPC9oMj4KICAgICAgICA8b2w+CiAgICAgICAgICA8bGk+Q2xpY2sgdGhlIFNpZ251cCB0YWIgYW5kIGZpbGwgb3V0IHRoZSBzaWdudXAgZm9ybSB0byBjcmVhdGUgYW4gYWNjb3VudC4gVXNlIGEgcmVhbCBwaG9uZSBudW1iZXIhPC9saT4KICAgICAgICAgIDxsaT5DbGljayB0aGUgTG9naW4gdGFiIGFuZCB0cnkgdG8gbG9naW4gMyB0aW1lcyB3aXRoIGFuIGluY29ycmVjdCBwYXNzd29yZC48L2xpPgogICAgICAgICAgPGxpPkNoZWNrIHlvdXIgU01TIG1lc3NhZ2UgdG8gZ2V0IHRoZSB2ZXJpZmljYXRpb24gY29kZS48L2xpPgogICAgICAgICAgPGxpPkVudGVyIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB1bmxvY2sgdGhlIGFjY291bnQuIFRoZW4gbG9naW4gd2l0aCBhIGNvcnJlY3QgcGFzc3dvcmQ8L2xpPgogICAgICAgICAgPGxpPkNsaWNrIHRoZSBMb2dpbiB0YWIgYW5kIGNsaWNrIHRoZSBSZXNldCBwYXNzd29yZCBsaW5rPC9saT4KICAgICAgICAgIDxsaT5FbnRlciB0aGUgYWNjb3VudCBlbWFpbCBhZGRyZXNzIGFuZCBjbGljayB0aGUgU3VibWl0IGJ1dHRvbjwvbGk+CiAgICAgICAgICA8bGk+Q2hlY2sgeW91ciBTTVMgbWVzc2FnZSB0byBnZXQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlLjwvbGk+CiAgICAgICAgICA8bGk+RW50ZXIgYSBuZXcgcGFzc3dvcmQgYW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0aGVuIGNsaWNrIHRoZSBTdWJtaXQgYnV0dG9uIHRvIGNoYW5nZSB0aGUgcGFzc3dvcmQuPC9saT4KICAgICAgICAgIDxsaT5Mb2dpbiB3aXRoIGEgbmV3IHBhc3N3b3JkLjwvbGk+CiAgICAgICAgPC9vbD4KICAgICAgICA8aDI+VGVjaG5vbG9naWVzIHVzZWQ8L2gyPgogICAgICAgIDx1bD4KICAgICAgICAgIDxsaT48YSBocmVmPSdodHRwczovL2RldmVsb3Blci5yaW5nY2VudHJhbC5jb20vYXBpLWRvY3MvbGF0ZXN0L2luZGV4Lmh0bWwjISNSZWZTTVNNZXNzYWdlcy5odG1sJyB0YXJnZXQ9J19ibGFuayc+UmluZ0NlbnRyYWwgU01TIEFQSTwvYT48L2xpPgogICAgICAgICAgPGxpPjxhIGhyZWY9J2h0dHBzOi8vd3d3LnNxbGl0ZS5vcmcvJyB0YXJnZXQ9J19ibGFuayc+U1FsaXRlPC9hPjwvbGk+CiAgICAgICAgICA8bGk+PGEgaHJlZj0naHR0cHM6Ly9leHByZXNzanMuY29tLycgdGFyZ2V0PSdfYmxhbmsnPkV4cHJlc3M8L2E+PC9saT4KICAgICAgICAgIDxsaT48YSBocmVmPSdodHRwczovL25vZGVqcy5vcmcvZW4vJyB0YXJnZXQ9J19ibGFuayc+Tm9kZS5qczwvYT48L2xpPgogICAgICAgIDwvdWw+CiAgICAgICAgPGgyPkFkZGl0aW9uYWwgaW5mb3JtYXRpb248L2gyPgogICAgICAgIDx1bD4KICAgICAgICAgIDxsaT5Tb3VyY2UgY29kZTogPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL3JpbmdjZW50cmFsLzJmLWF1dGgtbm9kZScgdGFyZ2V0PSdfYmxhbmsnPkdpdGh1YjwvYT48L2xpPgogICAgICAgICAgPGxpPkNyZWF0ZWQgYnk6IDxhIGhyZWY9J2h0dHBzOi8vdHdpdHRlci5jb20vcGFjb3Z1JyB0YXJnZXQ9J19ibGFuayc+UGFjbyBWdTwvYT48L2xpPgogICAgICAgIDwvdWw+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9zZWN0aW9uPgo8L2JvZHk+CjwvaHRtbD4K</textarea>
<textarea class="saurus-file" data-file="views/signup.ejs" data-mode="ejs">PCFkb2N0eXBlIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDx0aXRsZT4yLUZhY3RvciBBdXRoZW50aWNhdGlvbiBEZW1vPC90aXRsZT4KICAgIDxzY3JpcHQgc3JjPSJqcy9tYWluLmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9ImpzL2pxdWVyeS0zLjEuMC5taW4uanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0ianMvc2hhMjU2LmpzIj48L3NjcmlwdD4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iY3NzL2Jvb3RzdHJhcC5taW4uY3NzIj4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9tYWluLmNzcyI+CjwvaGVhZD4KPGJvZHk+CiAgPG5hdiBjbGFzcz0ibmF2YmFyIG5hdmJhci1kZWZhdWx0Ij4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lci1mbHVpZCI+CiAgICAgIDxkaXYgY2xhc3M9Im5hdmJhci1oZWFkZXIiPgogICAgICAgIDxhIGhyZWY9Ii8iIGNsYXNzPSJuYXZiYXItYnJhbmQiPjxiPjItRmFjdG9yPC9iPiBBVVRIRU5USUNBVElPTjwvYT4KICAgICAgPC9kaXY+CiAgICAgIDx1bCBjbGFzcz0ibmF2IG5hdmJhci1uYXYiPgogICAgICAgIDxsaT48YSBocmVmPSIvIj5Mb2dpbjwvYT48L2xpPgogICAgICAgIDxsaT48YSBocmVmPSIvYWJvdXQiPkFib3V0PC9hPjwvbGk+CiAgICAgIDwvdWw+CiAgICAgIDx1bCBjbGFzcz0ibmF2IG5hdmJhci1uYXYgbmF2YmFyLXJpZ2h0Ij4KICAgICAgICA8bGk+PGEgaHJlZj0iaHR0cHM6Ly93d3cucmluZ2NlbnRyYWwuY29tIiB0YXJnZXQ9Il9ibGFuayI+UG93ZXJlZCBieSZuYnNwOyAgICAgICA8aW1nIGFsdD0iQnJhbmQiIHNyYz0iaW1nL3JpbmdjZW50cmFsLnBuZyIgaGVpZ2h0PSIyMCI+PC9hPjwvbGk+CiAgICAgIDwvdWw+CiAgICA8L2Rpdj4KICA8L25hdj4KCiAgPHNlY3Rpb24gaWQ9J2NvbnRlbnQnPgogICAgPGRpdiBjbGFzcz0ic2lnbnVwLWZvcm0gcm91bmQtY29ybmVyIj4KICAgICAgPGgxPlNpZ24gdXAgd2l0aCB5b3VyIHZhbGlkIG1vYmlsZSBwaG9uZSBudW1iZXIhPC9oMT4KICAgICAgPGZvcm0gY2xhc3M9ImZvcm0taW5saW5lIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgIDxsYWJlbCBmb3I9ImVtYWlsIj5FbWFpbCBhZGRyZXNzICo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgaWQ9ImVtYWlsIiB0eXBlPSJlbWFpbCIgbmFtZT0iZW1haWwiIHNpemU9IjMyIj48L2lucHV0Pjxici8+CiAgICAgICAgICA8bGFiZWwgZm9yPSJwYXNzd29yZCI+UGFzc3dvcmQgKjwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCBpZD0icGFzc3dvcmQiIHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgc2l6ZT0iMzIiPjwvaW5wdXQ+PGJyLz4KICAgICAgICAgIDxsYWJlbCBmb3I9InBob25lbm8iPk1vYmlsZSBwaG9uZSAqPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJwaG9uZW5vIiB0eXBlPSJudW1iZXIiIG5hbWU9InBob25lbm8iIHNpemU9IjMyIj48L2lucHV0Pjxici8+CiAgICAgICAgICA8bGFiZWwgZm9yPSJmbmFtZSI+Rmlyc3QgbmFtZTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCBpZD0iZm5hbWUiIHR5cGU9InRleHQiIG5hbWU9ImZuYW1lIiBzaXplPSIzMiI+PC9pbnB1dD48YnIvPgogICAgICAgICAgPGxhYmVsIGZvcj0ibG5hbWUiPkxhc3QgbmFtZTwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCBpZD0ibG5hbWUiIHR5cGU9InRleHQiIG5hbWU9ImxuYW1lIiBzaXplPSIzMiI+PC9pbnB1dD48YnIvPgogICAgICAgIDwvZGl2Pjxici8+CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWNhbGwiIG9uY2xpY2s9InNpZ251cCgpIj5TdWJtaXQ8L2J1dHRvbj4KICAgICAgPC9mb3JtPgogICAgPC9kaXY+CiAgPC9zZWN0aW9uPgo8L2JvZHk+CjwvaHRtbD4K</textarea>
<textarea class="saurus-file" data-file="views/index.ejs" data-mode="ejs">PCFkb2N0eXBlIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4NCiAgICA8dGl0bGU+Mi1GYWN0b3IgQXV0aGVudGljYXRpb24gRGVtbzwvdGl0bGU+DQogICAgPHNjcmlwdCBzcmM9ImpzL21haW4uanMiIHR5cGU9InRleHQvamF2YXNjcmlwdCI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9ImpzL2pxdWVyeS0zLjEuMC5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9ImpzL3NoYTI1Ni5qcyI+PC9zY3JpcHQ+DQogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvYm9vdHN0cmFwLm1pbi5jc3MiPg0KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9tYWluLmNzcyI+DQo8L2hlYWQ+DQo8Ym9keT4NCiAgPG5hdiBjbGFzcz0ibmF2YmFyIG5hdmJhci1kZWZhdWx0Ij4NCiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXItZmx1aWQiPg0KICAgICAgPGRpdiBjbGFzcz0ibmF2YmFyLWhlYWRlciI+DQogICAgICAgIDxhIGhyZWY9Ii8iIGNsYXNzPSJuYXZiYXItYnJhbmQiPjxiPjItRmFjdG9yPC9iPiBBVVRIRU5USUNBVElPTjwvYT4NCiAgICAgIDwvZGl2Pg0KICAgICAgPHVsIGNsYXNzPSJuYXYgbmF2YmFyLW5hdiI+DQogICAgICAgIDxsaT48YSBocmVmPSIvc2lnbnVwIj5TaWdudXA8L2E+PC9saT4NCiAgICAgICAgPGxpPjxhIGhyZWY9Ii9hYm91dCI+QWJvdXQ8L2E+PC9saT4NCiAgICAgIDwvdWw+DQogICAgICA8dWwgY2xhc3M9Im5hdiBuYXZiYXItbmF2IG5hdmJhci1yaWdodCI+DQogICAgICAgIDxsaT48YSBocmVmPSJodHRwczovL3d3dy5yaW5nY2VudHJhbC5jb20iIHRhcmdldD0iX2JsYW5rIj5Qb3dlcmVkIGJ5Jm5ic3A7PGltZyBhbHQ9IkJyYW5kIiBzcmM9ImltZy9yaW5nY2VudHJhbC5wbmciIGhlaWdodD0iMjAiPjwvYT48L2xpPg0KICAgICAgPC91bD4NCiAgICA8L2Rpdj4NCiAgPC9uYXY+DQoNCiAgPHNlY3Rpb24gaWQ9J2NvbnRlbnQnPg0KICAgIDwhLS0gbG9naW4gZm9ybSAtLT4NCiAgICA8ZGl2IGlkPSJsb2dpbiIgY2xhc3M9InNpZ251cC1mb3JtIHJvdW5kLWNvcm5lciI+DQogICAgICAgIDxoMT5Mb2dpbjwvaDE+DQogICAgICAgIDxkaXYgaWQ9ImluZm9fbGFiZWwiIGNsYXNzPSJpbmZvX2xhYmVsIj5Mb2dpbiB3aXRoIGVtYWlsPC9kaXY+PC9icj4NCiAgICAgICAgPGZvcm0gY2xhc3M9ImZvcm0taW5saW5lIj4NCiAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4NCiAgICAgICAgICAgIDxsYWJlbCBmb3I9InVzZXJuYW1lIj5Vc2VyIG5hbWUgKjwvbGFiZWw+DQogICAgICAgICAgICAgIDxpbnB1dCBpZD0idXNlcm5hbWUiIHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiBzaXplPSIzMiI+PC9pbnB1dD48YnIvPg0KICAgICAgICAgICAgPGxhYmVsIGZvcj0icGFzc3dvcmQiPlBhc3N3b3JkICo8L2xhYmVsPg0KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InBhc3N3b3JkIiB0eXBlPSJwYXNzd29yZCIgbmFtZT0icGFzc3dvcmQiIHNpemU9IjMyIj48L2lucHV0Pg0KICAgICAgICAgIDwvZGl2Pjxici8+DQogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLWNhbGwiIG9uY2xpY2s9ImdldFNlZWQoKSI+TG9naW48L2J1dHRvbj4mbmJzcDsmbmJzcDsNCiAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OnJlc2V0UGFzc3dvcmQoKSI+UmVzZXQgcGFzc3dvcmQ8L2E+DQogICAgICAgIDwvZm9ybT4NCiAgICA8L2Rpdj4NCiAgICA8IS0tIHZlcmlmaWNhdGlvbiBmb3JtIC0tPg0KICAgIDxkaXYgaWQ9InZlcmlmaWNhdGlvbiIgY2xhc3M9InNpZ251cC1mb3JtIHJvdW5kLWNvcm5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiPg0KICAgICAgICA8aDE+VmVyaWZpY2F0aW9uPC9oMT4NCiAgICAgICAgPGRpdiBpZD0iaW5mb19sYWJlbF92YyIgY2xhc3M9ImluZm9fbGFiZWwiPllvdXIgYWNjb3VudCBpcyBsb2NrZWQuIENoZWNrIHlvdXIgU01TIG1lc3NhZ2UgZm9yIHZlcmlmaWNhdGlvbiBjb2RlPC9kaXY+PC9icj4NCiAgICAgICAgPGZvcm0gY2xhc3M9ImZvcm0taW5saW5lIj4NCiAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4NCiAgICAgICAgICAgIDxsYWJlbCBmb3I9InBhc3Njb2RlIj5WZXJpZmljYXRpb24gY29kZSAqPC9sYWJlbD4NCiAgICAgICAgICAgICAgPGlucHV0IGlkPSJwYXNzY29kZSIgdHlwZT0ibnVtYmVyIiBuYW1lPSJjb2RlIiBzaXplPSI4Ij48L2lucHV0Pg0KICAgICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OnJlc2VuZENvZGUoKSI+UmVzZW5kIGNvZGU8L2E+DQogICAgICAgICAgPC9kaXY+PGJyLz4NCiAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1jYWxsIiBvbmNsaWNrPSJ2ZXJpZnlQYXNzY29kZSgpIj5TdWJtaXQ8L2J1dHRvbj4NCiAgICAgICAgPC9mb3JtPg0KICAgIDwvZGl2Pg0KICAgIDwhLS0gcmVzZXQgcGFzc3dvcmQgZm9ybSAtLT4NCiAgICA8ZGl2IGlkPSJyZXNldHB3ZCIgY2xhc3M9InNpZ251cC1mb3JtIHJvdW5kLWNvcm5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiPg0KICAgICAgICA8aDE+UmVzZXQgcGFzc3dvcmQ8L2gxPg0KICAgICAgICA8ZGl2IGlkPSJpbmZvX2xhYmVsX2NwIiBjbGFzcz0iaW5mb19sYWJlbCI+RW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzPC9kaXY+DQogICAgICAgIDxmb3JtIGNsYXNzPSJmb3JtLWlubGluZSI+DQogICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+DQogICAgICAgICAgICA8bGFiZWwgZm9yPSJ1c2VybmFtZV9jcCI+VXNlciBuYW1lICo8L2xhYmVsPg0KICAgICAgICAgICAgICA8aW5wdXQgaWQ9InVzZXJuYW1lX2NwIiB0eXBlPSJ0ZXh0IiBuYW1lPSJ1c2VybmFtZSIgc2l6ZT0iMzIiPjwvaW5wdXQ+PGJyLz4NCiAgICAgICAgICAgIDxkaXYgaWQ9InZlcmlmaWNhdGlvbl9jcCIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiPg0KICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJwYXNzd29yZF9jcCI+TmV3IHBhc3N3b3JkICo8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0icGFzc3dvcmRfY3AiIHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgc2l6ZT0iMzIiPjwvaW5wdXQ+PGJyLz4NCiAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iY29kZV9jcCI+VmVyaWZpY2F0aW9uIGNvZGUgKjwvbGFiZWw+DQogICAgICAgICAgICAgICAgPGlucHV0IGlkPSJjb2RlX2NwIiB0eXBlPSJudW1iZXIiIG5hbWU9ImNvZGUiIHNpemU9IjgiPjwvaW5wdXQ+DQogICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDpyZXNlbmRDb2RlKCkiID5SZXNlbmQgY29kZTwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgIDwvZGl2Pjxici8+DQogICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tY2FsbCIgb25jbGljaz0icmVzZXRQd2QoKSI+U3VibWl0PC9idXR0b24+DQogICAgICAgIDwvZm9ybT4NCiAgICA8L2Rpdj4NCiAgPC9zZWN0aW9uPg0KPC9ib2R5Pg0KPC9odG1sPg0K</textarea>
<textarea class="saurus-file" data-file="public/js/main.js" data-mode="javascript">d2luZG93Lm9ubG9hZCA9IGluaXQ7DQpjb25zdCBPSyA9IDANCmNvbnN0IEZBSUxFRCA9IDENCmNvbnN0IExPQ0tFRCA9IDINCmNvbnN0IElOVkFMSUQgPSAzDQpjb25zdCBVTktOT1dOID0gNA0KdmFyIGVtYWlsID0gIiINCmZ1bmN0aW9uIGluaXQoKSB7DQogICQoIiNpbmZvX2xhYmVsIikuaGlkZSgpDQp9DQoNCmZ1bmN0aW9uIGdldFNlZWQoKXsNCiAgZW1haWwgPSAkKCIjdXNlcm5hbWUiKS52YWwoKQ0KICBpZiAoZW1haWwgPT0gIiIpew0KICAgIGFsZXJ0KCJNaXNzaW5nIGVtYWlsIGFkZHJlc3MuIikNCiAgICByZXR1cm4NCiAgfQ0KICAkKCIjaW5mb19sYWJlbCIpLmhpZGUoKQ0KICAkKCIjaW5mb19sYWJlbCIpLmh0bWwoIiIpDQogIHZhciB1cmwgPSAiZ2V0c2VlZCI7DQogIHZhciBwb3N0aW5nID0gJC5nZXQodXJsKTsNCiAgcG9zdGluZy5kb25lKGZ1bmN0aW9uKCByZXNwb25zZSApIHsNCiAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2UpOw0KICAgIHZhciB0ZW1wID0gQ3J5cHRvSlMuU0hBMjU2KCQoIiNwYXNzd29yZCIpLnZhbCgpLCAiIikudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLkhleCk7DQogICAgdmFyIGRpZ2VzdCA9IENyeXB0b0pTLlNIQTI1Nih0ZW1wLCBqc29uLnNlZWQpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpOw0KICAgIGxvZ2luKGpzb24uaWQsIGRpZ2VzdCkNCiAgfSk7DQogIHBvc3RpbmcuZmFpbChmdW5jdGlvbihyZXNwb25zZSl7DQogICAgYWxlcnQocmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBsb2dpbihpZCwgaGFzaGVkKXsNCiAgdmFyIHVybCA9ICJsb2dpbiI7DQogIHZhciBkYXRhID0gew0KICAgIHVzZXJuYW1lOiBlbWFpbCwNCiAgICBwYXNzd29yZDogaGFzaGVkLA0KICAgIGlkOiBpZA0KICB9DQogIHZhciBwb3N0aW5nID0gJC5wb3N0KCB1cmwsIGRhdGEgKTsNCiAgcG9zdGluZy5kb25lKGZ1bmN0aW9uKCByZXNwb25zZSApIHsNCiAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2UpOw0KICAgIGlmIChqc29uLmVycm9yID09IE9LKXsNCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oImFib3V0IikNCiAgICB9ZWxzZSBpZiAoanNvbi5lcnJvciA9PSBGQUlMRUQpew0KICAgICAgJCgiI2luZm9fbGFiZWwiKS5zaG93KCkNCiAgICAgICQoIiNpbmZvX2xhYmVsIikuaHRtbChqc29uLm1lc3NhZ2UpDQogICAgfWVsc2UgaWYgKGpzb24uZXJyb3IgPT0gTE9DS0VEKXsNCiAgICAgICQoIiNsb2dpbiIpLmhpZGUoKQ0KICAgICAgJCgiI2luZm9fbGFiZWxfdmMiKS5odG1sKGpzb24ubWVzc2FnZSkNCiAgICAgICQoIiNpbmZvX2xhYmVsX3ZjIikuc2hvdygpDQogICAgICAkKCcjdmVyaWZpY2F0aW9uJykuc2hvdygpDQogICAgfQ0KICB9KTsNCiAgcG9zdGluZy5mYWlsKGZ1bmN0aW9uKHJlc3BvbnNlKXsNCiAgICBhbGVydChyZXNwb25zZS5zdGF0dXNUZXh0KTsNCiAgfSk7DQp9DQoNCmZ1bmN0aW9uIHNpZ251cCgpew0KICB2YXIgdXJsID0gInNpZ251cCI7DQogIHZhciB0ZW1wID0gJCgiI3Bhc3N3b3JkIikudmFsKCkNCiAgaWYgKHRlbXAgPT0gIiIpew0KICAgIGFsZXJ0KCJNaXNzaW5nIHBhc3N3b3JkLiIpDQogICAgcmV0dXJuDQogIH0NCiAgaWYgKCQoIiNlbWFpbCIpLnZhbCgpID09ICIiKXsNCiAgICBhbGVydCgiTWlzc2luZyBlbWFpbCBhZGRyZXNzLiIpDQogICAgcmV0dXJuDQogIH0NCiAgaWYgKCQoIiNwaG9uZW5vIikudmFsKCkgPT0gIiIpew0KICAgIGFsZXJ0KCJNaXNzaW5nIHBob25lIG51bWJlci4iKQ0KICAgIHJldHVybg0KICB9DQogIHZhciBoYXNoZWQgPSBDcnlwdG9KUy5TSEEyNTYodGVtcCwgIiIpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpOw0KICB2YXIgZGF0YSA9IHsNCiAgICBlbWFpbDogJCgiI2VtYWlsIikudmFsKCksDQogICAgcGFzc3dvcmQ6IGhhc2hlZCwNCiAgICBwaG9uZW5vOiAkKCIjcGhvbmVubyIpLnZhbCgpLA0KICAgIGZuYW1lOiAkKCIjZm5hbWUiKS52YWwoKSwNCiAgICBsbmFtZTogJCgiI2xuYW1lIikudmFsKCkNCiAgfQ0KICB2YXIgcG9zdGluZyA9ICQucG9zdCggdXJsLCBkYXRhICk7DQogIHBvc3RpbmcuZG9uZShmdW5jdGlvbiggcmVzcG9uc2UgKSB7DQogICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsNCiAgICBpZiAoanNvbi5lcnJvciA9PSBPSyl7DQogICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKCIvIikNCiAgICB9ZWxzZXsNCiAgICAgIGFsZXJ0KGpzb24ubWVzc2FnZSkNCiAgICB9DQogIH0pOw0KICBwb3N0aW5nLmZhaWwoZnVuY3Rpb24ocmVzcG9uc2Upew0KICAgIGFsZXJ0KHJlc3BvbnNlLnN0YXR1c1RleHQpOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gdmVyaWZ5UGFzc2NvZGUoKSB7DQogIHZhciB1cmwgPSAidmVyaWZ5cGFzc2NvZGUiOw0KICBpZiAoZW1haWwgIT0gIiIpew0KICAgIHZhciBkYXRhID0gew0KICAgICAgdXNlcm5hbWU6IGVtYWlsLA0KICAgICAgcGFzc2NvZGU6ICQoIiNwYXNzY29kZSIpLnZhbCgpDQogICAgfQ0KICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KCB1cmwsIGRhdGEgKTsNCiAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlICkgew0KICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsNCiAgICAgIGlmIChqc29uLmVycm9yID09IE9LKXsNCiAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbigiLyIpDQogICAgICB9ZWxzZXsNCiAgICAgICAgJCgiI2luZm9fbGFiZWxfdmMiKS5odG1sKGpzb24ubWVzc2FnZSkNCiAgICAgICAgJCgiI2luZm9fbGFiZWxfdmMiKS5zaG93KCkNCiAgICAgIH0NCiAgICB9KTsNCiAgICBwb3N0aW5nLmZhaWwoZnVuY3Rpb24ocmVzcG9uc2Upew0KICAgICAgYWxlcnQocmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgfSk7DQogIH0NCn0NCg0KZnVuY3Rpb24gcmVzZW5kQ29kZSgpew0KICB2YXIgdXJsID0gInJlc2VuZGNvZGUiOw0KICBpZiAoZW1haWwgIT0gIiIpew0KICAgIHZhciBkYXRhID0gew0KICAgICAgdXNlcm5hbWU6IGVtYWlsDQogICAgfQ0KICAgIHZhciBwb3N0aW5nID0gJC5wb3N0KCB1cmwsIGRhdGEgKTsNCiAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlICkgew0KICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsNCiAgICAgICQoIiNpbmZvX2xhYmVsX2NwIikuaHRtbChqc29uLm1lc3NhZ2UpDQogICAgICAkKCIjaW5mb19sYWJlbF9jcCIpLnNob3coKQ0KICAgICAgJCgiI2luZm9fbGFiZWxfdmMiKS5odG1sKGpzb24ubWVzc2FnZSkNCiAgICAgICQoIiNpbmZvX2xhYmVsX3ZjIikuc2hvdygpDQogICAgfSk7DQogICAgcG9zdGluZy5mYWlsKGZ1bmN0aW9uKHJlc3BvbnNlKXsNCiAgICAgIGFsZXJ0KHJlc3BvbnNlLnN0YXR1c1RleHQpOw0KICAgIH0pOw0KICB9DQp9DQoNCmZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoKSB7DQogICQoIiNsb2dpbiIpLmhpZGUoKQ0KICAkKCIjcmVzZXRwd2QiKS5zaG93KCkNCiAgJCgiI3ZlcmlmaWNhdGlvbl9jcCIpLmhpZGUoKQ0KfQ0KDQpmdW5jdGlvbiByZXNldFB3ZCgpIHsNCiAgZW1haWwgPSAkKCIjdXNlcm5hbWVfY3AiKS52YWwoKQ0KICB2YXIgdXJsID0gInJlc2V0cHdkIjsNCiAgaWYgKGVtYWlsICE9ICIiKXsNCiAgICB2YXIgZGF0YSA9IHsNCiAgICAgIHVzZXJuYW1lOiBlbWFpbA0KICAgIH0NCiAgICBpZiAoJCgiI3ZlcmlmaWNhdGlvbl9jcCIpLmlzKCI6dmlzaWJsZSIpKXsNCiAgICAgIHZhciB0ZW1wID0gJCgiI3Bhc3N3b3JkX2NwIikudmFsKCkNCiAgICAgIHZhciBoYXNoZWQgPSBDcnlwdG9KUy5TSEEyNTYodGVtcCwgIiIpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpOw0KICAgICAgZGF0YS5wd2QgPSBoYXNoZWQNCiAgICAgIGRhdGEuY29kZSA9ICQoIiNjb2RlX2NwIikudmFsKCkNCiAgICB9DQogICAgdmFyIHBvc3RpbmcgPSAkLnBvc3QoIHVybCwgZGF0YSApOw0KICAgIHBvc3RpbmcuZG9uZShmdW5jdGlvbiggcmVzcG9uc2UgKSB7DQogICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2UpOw0KICAgICAgaWYgKGpzb24uZXJyb3IgPT0gT0spew0KICAgICAgICAkKCIjcmVzZXRwd2QiKS5oaWRlKCkNCiAgICAgICAgJCgiI2luZm9fbGFiZWwiKS5zaG93KCkNCiAgICAgICAgJCgiI2xvZ2luIikuc2hvdygpDQogICAgICB9ZWxzZSBpZiAoanNvbi5lcnJvciA9PSBVTktOT1dOKXsNCiAgICAgICAgJCgiI2luZm9fbGFiZWxfY3AiKS5odG1sKGpzb24ubWVzc2FnZSkNCiAgICAgIH1lbHNlew0KICAgICAgICAkKCIjdmVyaWZpY2F0aW9uX2NwIikuc2hvdygpDQogICAgICAgICQoIiNpbmZvX2xhYmVsX2NwIikuaHRtbChqc29uLm1lc3NhZ2UpDQogICAgICAgICQoIiNpbmZvX2xhYmVsX3ZjIikuc2hvdygpDQoNCiAgICAgIH0NCiAgICB9KTsNCiAgICBwb3N0aW5nLmZhaWwoZnVuY3Rpb24ocmVzcG9uc2Upew0KICAgICAgYWxlcnQocmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgfSk7DQogIH0NCn0NCg==</textarea>
<textarea class="saurus-file" data-file="engine.js" data-mode="javascript">dmFyIHNoYTI1NiA9IHJlcXVpcmUoImNyeXB0by1qcy9zaGEyNTYiKTsKY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7CnZhciBVU0VSX0RBVEFCQVNFID0gJy4vZGIvdXNlcnMuZGInOwpjb25zdCBPSyA9IDAKY29uc3QgRkFJTEVEID0gMQpjb25zdCBMT0NLRUQgPSAyCmNvbnN0IElOVkFMSUQgPSAzCmNvbnN0IFVOS05PV04gPSA0CmNvbnN0IE1BWF9GQUlMVVJFID0gMwp2YXIgcmVzcG9uc2UgPSB7fTsKCnZhciBlbmdpbmUgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICAgIGdldFNlZWQ6IGZ1bmN0aW9uKHJlcSwgcmVzKXsKICAgICAgbGV0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UoVVNFUl9EQVRBQkFTRSk7CiAgICAgIHZhciBxdWVyeSA9ICdDUkVBVEUgVEFCTEUgaWYgbm90IGV4aXN0cyBzZWVkcyAoaWQgSU5UIFBSSU1BUlkgS0VZLCBzZWVkIERhdGVUaW1lIE5PVCBOVUxMKScKICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCl7CiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpCiAgICAgICAgdmFyIGRhdGVTdHIgPSBkYXRlLnRvSVNPU3RyaW5nKCkKICAgICAgICB2YXIgaWQgPSBnZW5lcmF0ZVJhbmRvbUNvZGUoNSkKICAgICAgICB2YXIgcXVlcnkgPSAiSU5TRVJUIElOVE8gc2VlZHMgVkFMVUVTICgiICsgaWQgKyAiLCciICsgZGF0ZVN0ciArICInKSI7CiAgICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkgewogICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgaWYgKGVycil7CiAgICAgICAgICAgIGRhdGFiYXNlRXJyb3IocmVzKQogICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgc2VlZE9iaiA9IHsKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICBzZWVkOiBkYXRlU3RyCiAgICAgICAgICB9CiAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShzZWVkT2JqKSkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIChyZXEsIHJlcykgewogICAgICBsZXQgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShVU0VSX0RBVEFCQVNFKTsKICAgICAgdmFyIGluUGFzc3dvcmQgPSByZXEuYm9keS5wYXNzd29yZAogICAgICB2YXIgZW1haWwgPSByZXEuYm9keS51c2VybmFtZQogICAgICB2YXIgcXVlcnkgPSAiU0VMRUNUICogRlJPTSBzZWVkcyBXSEVSRSBpZD0iICsgcmVxLmJvZHkuaWQ7CiAgICAgIGRiLmdldChxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICAgICAgICBpZiAoZXJyKXsKICAgICAgICAgIGRhdGFiYXNlRXJyb3IocmVzKQogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgICB2YXIgc2VlZFN0ciA9IHJlc3VsdC5zZWVkCiAgICAgICAgcXVlcnkgPSAiREVMRVRFIEZST00gc2VlZHMgV0hFUkUgaWQ9IiArIHJlc3VsdC5pZDsKICAgICAgICBkYi5ydW4ocXVlcnksIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgaWYgKGVycikKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICAgICAgcXVlcnkgPSAiU0VMRUNUIHBob25lbm8sIHB3ZCwgZmFpbHVyZSwgbG9ja2VkLCBjb2RlIEZST00gdXNlcnMgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIExJTUlUIDEiOwogICAgICAgIGRiLmdldChxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsKICAgICAgICAgIGlmIChlcnIpewogICAgICAgICAgICBkYXRhYmFzZUVycm9yKHJlcykKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFyZXN1bHQpewogICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IEZBSUxFRAogICAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIldyb25nIHVzZXIgbmFtZSBhbmQgcGFzc3dvcmQgY29tYmluYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4uIgogICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdC5sb2NrZWQgPT0gMSl7CiAgICAgICAgICAgIHZhciBtYXNrUGhvbmVOdW1iZXIgPSByZXN1bHQucGhvbmVubwogICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8bWFza1Bob25lTnVtYmVyLmxlbmd0aC00OyBpKyspewogICAgICAgICAgICAgIG1hc2tQaG9uZU51bWJlciA9IG1hc2tQaG9uZU51bWJlci5zdWJzdHIoMCwgaSkgKyAnWCcgKyBtYXNrUGhvbmVOdW1iZXIuc3Vic3RyKGkgKyAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICJZb3VyIGFjY291bnQgaXMgdGVtcG9yYXJpbHkgbG9ja2VkLiBBIHZlcmlmaWNhdGlvbiBjb2RlIHdhcyBzZW50IHRvIHlvdXIgbW9iaWxlIHBob25lIG51bWJlciAiICsgbWFza1Bob25lTnVtYmVyICsgIi4gUGxlYXNlIGVudGVyIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB1bmNsb2NrIHlvdXIgYWNjb3VudC4iCiAgICAgICAgICAgIHNlbmRTTVNNZXNzYWdlKHJlcywgZGIsIHJlc3VsdC5waG9uZW5vLCBtZXNzYWdlKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHZhciBoYXNoZWQgPSBzaGEyNTYocmVzdWx0LnB3ZCwgc2VlZFN0cik7CiAgICAgICAgICAgIGlmIChpblBhc3N3b3JkID09IGhhc2hlZCl7CiAgICAgICAgICAgICAgcXVlcnkgPSAiVVBEQVRFIHVzZXJzIFNFVCBmYWlsdXJlPSAwLCBsb2NrZWQ9IDAsIGNvZGU9MCwgY29kZWV4cGlyeT0wIFdIRVJFIGVtYWlsPSciICsgZW1haWwgKyAiJyI7CiAgICAgICAgICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIpewogICAgICAgICAgICAgICAgICBkYXRhYmFzZUVycm9yKHJlcykKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2Vycm9yJ10gPSBPSwogICAgICAgICAgICAgICAgcmVzcG9uc2VbJ21lc3NhZ2UnXSA9ICJXZWxjb21lIGJhY2suIgogICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSByZXN1bHQuZmFpbHVyZQogICAgICAgICAgICAgIC8vIGluY3JlYXNlIGZhaWx1cmUgY291bnQKICAgICAgICAgICAgICBmYWlsdXJlICs9IDEKICAgICAgICAgICAgICB2YXIgcXVlcnkgPSAiIgogICAgICAgICAgICAgIGlmIChmYWlsdXJlID49IE1BWF9GQUlMVVJFKXsKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gIlVQREFURSB1c2VycyBTRVQgZmFpbHVyZT0gMCwgbG9ja2VkPSAxIFdIRVJFIGVtYWlsPSciICsgZW1haWwgKyAiJyI7CiAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgcXVlcnkgPSAiVVBEQVRFIHVzZXJzIFNFVCBmYWlsdXJlPSAiICsgZmFpbHVyZSArICIgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIpewogICAgICAgICAgICAgICAgICBkYXRhYmFzZUVycm9yKHJlcykKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgICAgICAgcmVzcG9uc2VbJ2Vycm9yJ10gPSBGQUlMRUQKICAgICAgICAgICAgICAgIHJlc3BvbnNlWydtZXNzYWdlJ10gPSAiV3JvbmcgdXNlciBuYW1lIGFuZCBwYXNzd29yZCBjb21iaW5hdGlvbi4gUGxlYXNlIHRyeSBhZ2Fpbi4iCiAgICAgICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRQd2Q6IGZ1bmN0aW9uIChyZXEsIHJlcykgewogICAgICBsZXQgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShVU0VSX0RBVEFCQVNFKTsKICAgICAgdmFyIGVtYWlsID0gcmVxLmJvZHkudXNlcm5hbWUKICAgICAgdmFyIHF1ZXJ5ID0gIlNFTEVDVCBwaG9uZW5vLCBjb2RlLCBjb2RlZXhwaXJ5IEZST00gdXNlcnMgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIExJTUlUIDEiOwogICAgICBkYi5nZXQocXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAgICAgICAgaWYgKGVycil7CiAgICAgICAgICBkYXRhYmFzZUVycm9yKHJlcykKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFyZXN1bHQpewogICAgICAgICAgcmVzcG9uc2VbJ2Vycm9yJ10gPSBVTktOT1dOCiAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIkFjY291bnQgZG9lcyBub3QgZXhpc3QuIgogICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSkKICAgICAgICB9CiAgICAgICAgdmFyIHB3ZCA9IHJlcS5ib2R5LnB3ZAogICAgICAgIHZhciBjb2RlID0gcmVxLmJvZHkuY29kZQogICAgICAgIGlmIChwd2QgPT09IHVuZGVmaW5lZCAmJiBjb2RlID09PSB1bmRlZmluZWQpewogICAgICAgICAgdmFyIG1hc2tQaG9uZU51bWJlciA9IHJlc3VsdC5waG9uZW5vCiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8bWFza1Bob25lTnVtYmVyLmxlbmd0aC00OyBpKyspewogICAgICAgICAgICBtYXNrUGhvbmVOdW1iZXIgPSBtYXNrUGhvbmVOdW1iZXIuc3Vic3RyKDAsIGkpICsgJ1gnICsgbWFza1Bob25lTnVtYmVyLnN1YnN0cihpICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgbWVzc2FnZSA9ICJBIHZlcmlmaWNhdGlvbiBjb2RlIHdhcyBzZW50IHRvIHlvdXIgbW9iaWxlIHBob25lIG51bWJlciAiICsgbWFza1Bob25lTnVtYmVyICsgIi4gUGxlYXNlIGVudGVyIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byByZXNldCB5b3VyIHBhc3N3b3JkLiI7CiAgICAgICAgICBzZW5kU01TTWVzc2FnZShyZXMsIGRiLCByZXN1bHQucGhvbmVubywgbWVzc2FnZSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKQogICAgICAgICAgdmFyIGdhcCA9IHRpbWVTdGFtcCAtIHJlc3VsdC5jb2RlZXhwaXJ5CiAgICAgICAgICBpZiAoZ2FwIDwgMzYwMCl7CiAgICAgICAgICAgIGlmIChjb2RlID4gMTAwMDAwICYmIGNvZGUgPT0gcmVzdWx0LmNvZGUpewogICAgICAgICAgICAgIHZhciBxdWVyeSA9ICJVUERBVEUgdXNlcnMgU0VUIHB3ZD0gJyIgKyBwd2QgKyAiJywgY29kZT0wLCBsb2NrZWQ9MCwgZmFpbHVyZT0wLCBjb2RlZXhwaXJ5PTAgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIjsKICAgICAgICAgICAgICBkYi5ydW4ocXVlcnksIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgICAgICAgaWYgKGVycil7CiAgICAgICAgICAgICAgICAgIGRhdGFiYXNlRXJyb3IocmVzKQogICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IE9LCiAgICAgICAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIlBhc3N3b3JkIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gIlVQREFURSB1c2VycyBTRVQgY29kZT0gMCwgY29kZWV4cGlyeT0gMCBXSEVSRSBlbWFpbD0nIiArIGVtYWlsICsgIiciOwogICAgICAgICAgICAgIGRiLnJ1bihxdWVyeSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgICAgICAgaWYgKGVycil7CiAgICAgICAgICAgICAgICAgIGRhdGFiYXNlRXJyb3IocmVzKQogICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IElOVkFMSUQKICAgICAgICAgICAgICAgIHJlc3BvbnNlWydtZXNzYWdlJ10gPSAiSW52YWxpZCB2ZXJpZmljYXRpb24gY29kZS4gQ2xpY2sgcmVzZW5kIHRvIGdldCBhIG5ldyB2ZXJpZmljYXRpb24gY29kZS4iCiAgICAgICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBkYi5jbG9zZSgpCiAgICAgICAgICAgIHJlc3BvbnNlWydlcnJvciddID0gSU5WQUxJRAogICAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIlZlcmlmaWNhdGlvbiBjb2RlIGV4cGlyZWQuIENsaWNrIHJlc2VuZCB0byBnZXQgYSBuZXcgdmVyaWZpY2F0aW9uIGNvZGUuIgogICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB2ZXJpZnlQYXNzY29kZTogZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgICAgIGxldCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKFVTRVJfREFUQUJBU0UpOwogICAgICB2YXIgaW5QYXNzY29kZSA9IHJlcS5ib2R5LnBhc3Njb2RlCiAgICAgIHZhciBlbWFpbCA9IHJlcS5ib2R5LnVzZXJuYW1lCiAgICAgIHZhciBxdWVyeSA9ICJTRUxFQ1QgbG9ja2VkLCBjb2RlLCBjb2RlZXhwaXJ5IEZST00gdXNlcnMgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIExJTUlUIDEiOwogICAgICBkYi5nZXQocXVlcnksIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkgewogICAgICAgIGlmIChlcnIpewogICAgICAgICAgZGF0YWJhc2VFcnJvcihyZXMpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQubG9ja2VkID09IDApewogICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IE9LCiAgICAgICAgICAgIHJlc3BvbnNlWydtZXNzYWdlJ10gPSAiUGxlYXNlIGxvZ2luLiIKICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKQogICAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICBpZiAoaW5QYXNzY29kZSl7CiAgICAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKQogICAgICAgICAgICB2YXIgZ2FwID0gdGltZVN0YW1wIC0gcmVzdWx0LmNvZGVleHBpcnkKICAgICAgICAgICAgaWYgKGdhcCA8IDM2MDApewogICAgICAgICAgICAgIGlmIChpblBhc3Njb2RlID4gMTAwMDAwICYmIHJlc3VsdC5jb2RlID09IGluUGFzc2NvZGUpewogICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gIlVQREFURSB1c2VycyBTRVQgZmFpbHVyZT0wLCBsb2NrZWQ9MCwgY29kZT0wLCBjb2RlZXhwaXJ5PTAgV0hFUkUgZW1haWw9JyIgKyBlbWFpbCArICInIjsKICAgICAgICAgICAgICAgIGRiLnJ1bihxdWVyeSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBkYi5jbG9zZSgpCiAgICAgICAgICAgICAgICAgIGlmIChlcnIpewogICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlRXJyb3IocmVzKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IE9LCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWydtZXNzYWdlJ10gPSAiUGxlYXNlIGxvZ2luLiIKICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSAiVVBEQVRFIHVzZXJzIFNFVCBjb2RlPTAsIGNvZGVleHBpcnk9MCBXSEVSRSBlbWFpbD0nIiArIGVtYWlsICsgIiciOwogICAgICAgICAgICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgaWYgKGVycil7CiAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VFcnJvcihyZXMpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlWydlcnJvciddID0gSU5WQUxJRAogICAgICAgICAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIkludmFsaWQgdmVyaWZpY2F0aW9uIGNvZGUuIENsaWNrIHJlc2VuZCB0byBnZXQgYSBuZXcgdmVyaWZpY2F0aW9uIGNvZGUuIgogICAgICAgICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIGRiLmNsb3NlKCkKICAgICAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IElOVkFMSUQKICAgICAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIlZlcmlmaWNhdGlvbiBjb2RlIGV4cGlyZWQuIENsaWNrIHJlc2VuZCB0byBnZXQgYSBuZXcgdmVyaWZpY2F0aW9uIGNvZGUuIgogICAgICAgICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSkKICAgICAgICAgICAgfQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRiLmNsb3NlKCkKICAgICAgICAgICAgcmVzcG9uc2VbJ2Vycm9yJ10gPSBGQUlMRUQKICAgICAgICAgICAgcmVzcG9uc2VbJ21lc3NhZ2UnXSA9ICJJbnZhbGlkIHZlcmlmaWNhdGlvbiBjb2RlLiBOb3Qgc2V0IgogICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNlbmRDb2RlOmZ1bmN0aW9uKHJlcSwgcmVzKSB7CiAgICAgIGxldCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKFVTRVJfREFUQUJBU0UpOwogICAgICB2YXIgZW1haWwgPSByZXEuYm9keS51c2VybmFtZQogICAgICB2YXIgcXVlcnkgPSAiU0VMRUNUIHBob25lbm8gRlJPTSB1c2VycyBXSEVSRSBlbWFpbD0nIiArIGVtYWlsICsgIicgTElNSVQgMSI7CiAgICAgIHZhciB0aGlzUmVzID0gcmVzCiAgICAgIGRiLmdldChxdWVyeSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7CiAgICAgICAgaWYgKGVycil7CiAgICAgICAgICBkYXRhYmFzZUVycm9yKHJlcykKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgdmFyIG1lc3NhZ2UgPSAiUGxlYXNlIGNoZWNrIHlvdXIgU01TIGZvciB2ZXJpZmljYXRpb24gY29kZSB0byB1bmNsb2NrIHlvdXIgYWNjb3VudC4iCiAgICAgICAgc2VuZFNNU01lc3NhZ2UocmVzLCBkYiwgcmVzdWx0LnBob25lbm8sIG1lc3NhZ2UpCiAgICAgIH0pOwogICAgfSwKICAgIGNhbkxvZ2luOmZ1bmN0aW9uKHJlcykgewogICAgICBsZXQgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShVU0VSX0RBVEFCQVNFLCBzcWxpdGUzLk9QRU5fUkVBRE9OTFksIChlcnIpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBlbmdpbmUuY3JlYXRlVGFibGUoKQogICAgICAgICAgcmVzLnJlbmRlcignc2lnbnVwJykKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHJlcy5yZW5kZXIoImluZGV4IikKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVRhYmxlOiBmdW5jdGlvbigpewogICAgICBsZXQgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZSgnLi9kYi91c2Vycy5kYicpOwogICAgICB2YXIgcXVlcnkgPSAnQ1JFQVRFIFRBQkxFIGlmIG5vdCBleGlzdHMgdXNlcnMgKGlkIElOVCBBSSBQUklNQVJZIEtFWSwgcGhvbmVubyBWQVJDSEFSKDEyKSBVTklRVUUgTk9UIE5VTEwsIGVtYWlsIFZBUkNIQVIoNjQpIFVOSVFVRSBOT1QgTlVMTCwgcHdkIFZBUkNIQVIoMjU2KSBOT1QgTlVMTCwgZm5hbWUgVkFSQ0hBUig0OCkgTk9UIE5VTEwsIGxuYW1lIFZBUkNIQVIoNDgpIE5PVCBOVUxMLCBmYWlsdXJlIElOVCBERUZBVUxUIDAsIGxvY2tlZCBJTlQgREVGQVVMVCAwLCBjb2RlIElOVDExIERFRkFVTFQgMCwgY29kZWV4cGlyeSBET1VCTEUgREVGQVVMVCAwKScKICAgICAgZGIucnVuKHF1ZXJ5KTsKICAgIH0sCiAgICBzaWdudXA6IGZ1bmN0aW9uIChyZXEsIHJlcykgewogICAgICBsZXQgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZSgnLi9kYi91c2Vycy5kYicpOwogICAgICB2YXIgdmFsU3RyID0gIk5VTEwsJyIgKyByZXEuYm9keS5waG9uZW5vICsgIicsIgogICAgICB2YWxTdHIgKz0gIiciICsgcmVxLmJvZHkuZW1haWwgKyAiJywiCiAgICAgIHZhbFN0ciArPSAiJyIgKyByZXEuYm9keS5wYXNzd29yZCArICInLCIKICAgICAgdmFsU3RyICs9ICInIiArIHJlcS5ib2R5LmZuYW1lICsgIicsIgogICAgICB2YWxTdHIgKz0gIiciICsgcmVxLmJvZHkubG5hbWUgKyAiJywwLDAsMCwwIgogICAgICB2YXIgcXVlcnkgPSAiSU5TRVJUIElOVE8gdXNlcnMgVkFMVUVTICgiKyB2YWxTdHIgKyIpIjsKICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICBkYi5jbG9zZSgpCiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgZGF0YWJhc2VFcnJvcihyZXMpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IE9LCiAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIkNvbmdyYXR1bGF0aW9ucy4iCiAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KfTsKCmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQ29kZShkaWdpdHMpIHsKICBjb25zdCByYW5kb21pemUgPSByZXF1aXJlKCdyYW5kb21hdGljJyk7CiAgdmFyIGNvZGUgPSByYW5kb21pemUoJzAnLCBkaWdpdHMpOwogIHJldHVybiBjb2RlCn0KCmZ1bmN0aW9uIHNlbmRTTVNNZXNzYWdlIChyZXMsIGRiLCB0b051bWJlciwgbWVzc2FnZSkgewogIHZhciBSQyA9IHJlcXVpcmUoJ3JpbmdjZW50cmFsJyk7CiAgLy8gSW5zdGFudGlhdGUgUkMtU0RLCiAgdmFyIHJjc2RrID0gbmV3IFJDKHsKICAgICAgc2VydmVyOiBwcm9jZXNzLmVudi5SQ19TRVJWRVIsCiAgICAgIGFwcEtleTogcHJvY2Vzcy5lbnYuUkNfQVBQX0tFWSwKICAgICAgYXBwU2VjcmV0OiBwcm9jZXNzLmVudi5SQ19BUFBfU0VDUkVUCiAgfSk7CiAgdmFyIHBsYXRmb3JtID0gcmNzZGsucGxhdGZvcm0oKTsKICB2YXIgdGhpc1JlcyA9IHJlcwogIHBsYXRmb3JtLmxvZ2luKHsKICAgIHVzZXJuYW1lOiBwcm9jZXNzLmVudi5SQ19VU0VSTkFNRSwKICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5SQ19QQVNTV09SRAogICAgfSkKICAgIC50aGVuKGZ1bmN0aW9uKGF1dGhSZXNwb25zZSkgewogICAgICB2YXIgY29kZSA9IGdlbmVyYXRlUmFuZG9tQ29kZSg2KQogICAgICBwbGF0Zm9ybS5wb3N0KCcvYWNjb3VudC9+L2V4dGVuc2lvbi9+L3NtcycsCiAgICAgICAgewogICAgICAgICAgZnJvbTogeydwaG9uZU51bWJlcic6IHByb2Nlc3MuZW52LlJDX1VTRVJOQU1FfSwKICAgICAgICAgIHRvOiBbeydwaG9uZU51bWJlcic6IHRvTnVtYmVyfV0sCiAgICAgICAgICB0ZXh0OiAiWW91ciB2ZXJpZmljYXRpb24gY29kZSBpcyAiICsgY29kZQogICAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgdGltZVN0YW1wID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkKICAgICAgICAgIHZhciBxdWVyeSA9ICJVUERBVEUgdXNlcnMgU0VUIGNvZGU9ICIgKyBjb2RlICsgIiwgY29kZWV4cGlyeT0gIiArIHRpbWVTdGFtcCArICIgV0hFUkUgcGhvbmVubz0nIiArIHRvTnVtYmVyICsgIiciOwogICAgICAgICAgZGIucnVuKHF1ZXJ5LCBmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgIGRhdGFiYXNlRXJyb3IodGhpc1JlcykKICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgfSk7CiAgICAgICAgICByZXNwb25zZVsnZXJyb3InXSA9IExPQ0tFRAogICAgICAgICAgcmVzcG9uc2VbJ21lc3NhZ2UnXSA9IG1lc3NhZ2UKICAgICAgICAgIHRoaXNSZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICAgICAgfSk7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgcmVzcG9uc2VbJ2Vycm9yJ10gPSBVTktOT1dOCiAgICAgICAgICByZXNwb25zZVsnbWVzc2FnZSddID0gIkNhbm5vdCBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlLiBQbGVhc2UgY2xpY2sgdGhlIFJlc2VuZCBidXR0b24gdG8gdHJ5IGFnYWluLiIKICAgICAgICAgIHRoaXNSZXMuc2VuZChKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpCiAgICB9KTsKfQoKZnVuY3Rpb24gZGF0YWJhc2VFcnJvcihyZXMpewogIHJlc3BvbnNlWydlcnJvciddID0gVU5LTk9XTgogIHJlc3BvbnNlWydtZXNzYWdlJ10gPSAiVXNlciBkYXRhYmFzZSBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iCiAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKQp9Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/ringcentral-tutorials/2f-auth-node" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/ringcentral-tutorials/2f-auth-node/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script>window.tutorialName="How to implement Two-Factor Authentication";</script><script src="viewsaurus.js"></script></body></html>